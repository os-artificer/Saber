# Default values for saber
# Deploy controller, databus, and agent in Kubernetes

image:
  repository: saber/saber
  tag: "1.0.0"
  pullPolicy: IfNotPresent

# Controller: gRPC server on 26688
controller:
  replicaCount: 1
  config:
    name: controller
    version: v1.0.0
    service:
      listenAddress: "0.0.0.0:26688"
    log:
      fileName: /dev/stderr
      fileSize: 100
      maxBackupCount: 3
      maxBackupAge: 7
  resources: {}
  # resources:
  #   requests:
  #     memory: "64Mi"
  #     cpu: "50m"
  #   limits:
  #     memory: "128Mi"
  #     cpu: "200m"
  nodeSelector: {}
  tolerations: []

# Databus: gRPC server on 26689, writes to Kafka
databus:
  replicaCount: 1
  config:
    name: databus
    version: v1.0.0
    service:
      listenAddress: "tcp://0.0.0.0:26689"
    kafka:
      brokers: []
      topic: saber-metrics
    log:
      path: /dev/stderr
      maxFileSize: 100
      maxBackupCount: 3
      maxBackupAge: 7
  resources: {}
  nodeSelector: {}
  tolerations: []

# Agent: connects to controller and databus, reports host metrics
agent:
  enabled: true
  daemonSet: false
  replicaCount: 1
  config:
    name: agent
    version: v1.0.0
    controller:
      endpoints: ""   # set by chart to Release-controller:26688
    databus:
      endpoints: ""   # set by chart to Release-databus:26689
    collector:
      interval: 10s
    log:
      fileName: /dev/stderr
      fileSize: 100
      maxBackupCount: 3
      maxBackupAge: 7
  resources: {}
  nodeSelector: {}
  tolerations: []
