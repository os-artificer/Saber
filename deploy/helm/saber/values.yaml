# Default values for saber
# Deploy controller, transfer, and probe in Kubernetes

image:
  repository: saber/saber
  tag: "1.0.0"
  pullPolicy: IfNotPresent

# Controller: gRPC server on 26688
controller:
  replicaCount: 1
  config:
    name: controller
    version: v1.0.0
    service:
      listenAddress: "0.0.0.0:26688"
    log:
      fileName: /dev/stderr
      fileSize: 100
      maxBackupCount: 3
      maxBackupAge: 7
  resources: {}
  # resources:
  #   requests:
  #     memory: "64Mi"
  #     cpu: "50m"
  #   limits:
  #     memory: "128Mi"
  #     cpu: "200m"
  nodeSelector: {}
  tolerations: []

# Transfer: gRPC server on 26689, writes to Kafka
transfer:
  replicaCount: 1
  config:
    name: transfer
    version: v1.0.0
    service:
      listenAddress: "tcp://0.0.0.0:26689"
    kafka:
      brokers: []
      topic: saber-metrics
    log:
      path: /dev/stderr
      maxFileSize: 100
      maxBackupCount: 3
      maxBackupAge: 7
  resources: {}
  nodeSelector: {}
  tolerations: []

# Probe: connects to controller and transfer, reports host metrics
probe:
  enabled: true
  daemonSet: false
  replicaCount: 1
  config:
    name: probe
    version: v1.0.0
    controller:
      endpoints: ""   # set by chart to Release-controller:26688
    transfer:
      endpoints: ""   # set by chart to Release-transfer:26689
    collector:
      interval: 10
    log:
      fileName: /dev/stderr
      fileSize: 100
      maxBackupCount: 3
      maxBackupAge: 7
  resources: {}
  nodeSelector: {}
  tolerations: []
